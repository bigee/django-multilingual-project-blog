{% extends "base.html" %}
{% load i18n sekizai_tags simple_translation_tags %}
{% load cms_tags %}
{% load url from future %}

{% block main %}
<div class="container">
    <h2 class="title-divider"><span>{% trans "Good Practice Examples" %}</span></h2>

    <!-- // EVENT LIST FILTER -->
    {% addtoblock "js" %}
    <script src="{{ STATIC_URL }}multilingual_project_blog/js/libs/bootstrap-multiselect.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('.example-list-filter').multiselect()
            $(".multiselect-container").children("li").children("a").children("label").click(function(e) {
                {% comment %}
                if (list_item.hasClass("active") && list_item.hasClass("filter")) {
                    list_item.removeClass("active");
                    if (list_item.parent().children(".filter.active").length==0) {
                        list_item.parent().children(".no_filter").addClass("active");
                    }
                } else if (list_item.hasClass("filter")) {
                    list_item.addClass("active");
                    list_item.parent().children(".no_filter").removeClass("active");
                } else if (list_item.hasClass("no_filter")) {
                    list_item.addClass("active");
                    list_item.parent().children(".filter").removeClass("active");
                }
                {% endcomment %}
                var filterClasses = []
                $('.active').children("a").children("label").children("input").each(function() {
                    filterClasses.push($(this).val());
                })

                $(".example").each(function() {
                    $(this).removeClass("hide");
                    for (var i = 0; i < filterClasses.length; i++) {
                        if (!$(this).hasClass(filterClasses[i])) {
                            $(this).addClass("hide");
                        }
                    }
                });

                if ($(".example").not(".hide").length==0) {
                    $(".no-examples").removeClass("hide");
                } else {
                    $(".no-examples").addClass("hide");
                }

            });
        })
    </script>
    {% endaddtoblock %}

    <div class="row">


    	<!-- examples -->

    	<div class="span9" id="examples-content">
		    <div class="example-list">
				<div class="row">
                    <div class="span9 no-examples hide"><span class="label label-info">{% trans "No examples found." %}</span></div>
                        <!-- EXAMPLE -->
                    {% for example in object_list %}
                        {% include "good_practice_examples/partials/example_item.html" %}
                    {% empty %}
                        <div class="span9">
                            <div class="alert alert-warning">{% trans "No examples found." %}</div>
                        </div>
                    {% endfor %}
				</div><!--/row-->
            </div>
    	</div> <!-- /span9 exampes-content -->

    	<!-- /sidebar -->

    	<div class="span3 sidebar" id="examples-sidebar">

    		<div class="well intro">
                <small>
                    {% placeholder 01_sidebar %}
                </small>
            </div>

    		<h4 class="title-divider"><span>{% trans "Filter" %}</span></h4>

    		<div class="well" style="max-width: 340px; padding: 8px 0;">
                <div class="nav-list nav">
                    <div class="nav-header">{% trans "Countries" %}</div>
                    <select class="countries-list-filter example-list-filter" class="multiselect" multiple="multiple">
                        {% for country in countries %}
                            <option value="country{{ country.pk }}">{{ country.country.name }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

    		<div class="well" style="max-width: 340px; padding: 8px 0;">
                <div class="nav-list nav">
                    <div class="nav-header">{% trans "Goals" %}</div>
                    <select class="goals-list-filter example-list-filter" class="multiselect" multiple="multiple">
                        {% for goal in goals %}
                            <option value="goal{{ goal.pk }}">{{ goal }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>

    		<div class="well" style="max-width: 340px; padding: 8px 0;">
                <div class="nav-list nav">
                    <div class="nav-header">{% trans "Sectors" %}</div>
                    <select class="sectors-list-filter example-list-filter" class="multiselect" multiple="multiple">
                        {% for sector in sectors %}
                            <option value="sector{{ sector.pk }}">{{ sector }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
    	</div>


    </div><!-- /row -->

</div> <!--/container -->
{% endblock %}
